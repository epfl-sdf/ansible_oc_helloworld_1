---
- hosts: all
  roles:
         # Loads library/openshift.py to make it available to other plays;
         # does nothing else by itself
         - { role: epfl_idevelop.ansible_module_openshift }

- hosts: all
  tasks:
    - name: "Service"
      openshift:
        state: latest
        kind: Service
        name: "nginx-svc"
        namespace: "my-project"
        content: |
            apiVersion: v1
            kind: Service
            metadata:
                name: my-nginx-app
                labels:
                   run: my-nginx-app
                namespace: myproject
            spec:
                selector:
                   run: my-nginx-app
                ports:
                - port: 80
                  protocol: TCP
                  targetPort: 80